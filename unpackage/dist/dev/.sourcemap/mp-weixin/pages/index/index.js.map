{"version":3,"sources":["uni-app:///main.js",null,"webpack:///D:/source-code/water-meter-app/pages/index/index.vue?eadd","webpack:///D:/source-code/water-meter-app/pages/index/index.vue?d1dc","webpack:///D:/source-code/water-meter-app/pages/index/index.vue?bff1","uni-app:///pages/index/index.vue","webpack:///D:/source-code/water-meter-app/pages/index/index.vue?95b0","webpack:///D:/source-code/water-meter-app/pages/index/index.vue?7d4d"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","options","path","autoplay","loop","titleBarHeight","navigationBarHeight","screenHeight","isBinding","isEmpower","showModal","showTipModal","tabbarHeight","banners","url","userInfo","contentHeight","role","tabs","created","onLoad","uni","onShow","methods","initNavigation","width","height","left","top","statusBarHeight","opacity","windowHeight","scanCode","scanType","success","console","that","name","fail","empower","res","scope","getUserInfo","resolve","reject","startBleAuth","bl","gotoPay","bleFoundCallback","checkBindMeter","search","computed"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,cAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8H;AAC9H;AACyD;AACL;AACsC;;;AAG1F;AACsM;AACtM,gBAAgB,gNAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,4FAAM;AACR,EAAE,qGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,gGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,yQAEN;AACP,KAAK;AACL;AACA,aAAa,mQAEN;AACP,KAAK;AACL;AACA,aAAa,wLAEN;AACP,KAAK;AACL;AACA,aAAa,uPAEN;AACP,KAAK;AACL;AACA,aAAa,yNAEN;AACP,KAAK;AACL;AACA,aAAa,mNAEN;AACP,KAAK;AACL;AACA,aAAa,+QAEN;AACP,KAAK;AACL;AACA,aAAa,oMAEN;AACP,KAAK;AACL;AACA,aAAa,uMAEN;AACP,KAAK;AACL;AACA,aAAa,yNAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACtFA;AAAA;AAAA;AAAA;AAAixB,CAAgB,8xBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;ACkKryB;AACA;AAGA;AAAA;AAAA,eACA;EACAC;IACA;MACAC;QACA;QACAC;QACAC;QACA;QACAC;MACA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;QACAC;MACA,GACA;QACAA;MACA,EACA;MACAC;MACAC;MACAC;MAAA;MACAC;IACA;EACA;EACAC;IACA;EACA;EACAC;IACAC;IACA;IACA;EACA;EACAC;IACA;IACA;IACA;IACA;MACA;MACA;MACA;MACA;QACA;QACA;MACA;QACA;QACA;MACA;IACA;EACA;EACAC,yCACA;IACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACA;IACAC,8CAQA;MAAA,IAPAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MAEA;MACA;IACA;IACA;IACAC;MACA;MACAX;QACAY,WACA,SACA;QACAC;UACAC;UACA;UACA;UACAC;UACA;UACAf;YACAgB;UACA;QACA;QACAC;UACAjB;QACA;MACA;IACA;IACA;IACAkB;MACA;MACAlB;QACAa;UAAA;YAAA;YAAA;cAAA;gBAAA;kBAAA;oBAAA,IAEAM;sBAAA;sBAAA;oBAAA;oBACA;oBACAnB;sBACAoB;sBACAP;wBAAA;0BAAA;0BAAA;4BAAA;8BAAA;gCAAA;kCACAE;kCACA;kCAAA;kCAAA,OACAA;gCAAA;kCAAArB;kCACAqB;kCACAA;kCACAA;kCACAf;kCACAe;kCACA;kCACA;gCAAA;gCAAA;kCAAA;8BAAA;4BAAA;0BAAA;wBAAA;sBAEA;oBACA;oBAAA;oBAAA;kBAAA;oBAEAA;oBACA;oBAAA;oBAAA,OACAA;kBAAA;oBAAArB;oBACAqB;oBACAA;oBACAA;oBACAf;oBACAe;oBACA;oBACA;kBAAA;kBAAA;oBAAA;gBAAA;cAAA;YAAA;UAAA;QAEA;MACA;IACA;IACA;IACAM;MACA;QACArB;UACAa;YACAS;UACA;UACAL;YACAH;YACAS;UACA;QACA;MACA;IACA;IACA;IACAC;MACA;MACAxB;QACAa;UACA;UACA;YACA;YACAb;cACAoB;cACAP;gBACA;gBACA;gBACAY;gBACA;cACA;YACA;UACA;YACA;YACAA;YACA;UACA;QACA;MACA;IACA;IACA;IACAC;MACA1B;QACAP;MACA;IACA;IACA;IACAkC;MACA;MACAb;IACA;IACA;IACAc;MACA;MACA;IACA;IACA;IACAC,kCAEA;EAAA,EACA;EACAC,4BACA;AAEA;AAAA,2B;;;;;;;;;;;;;ACtXA;AAAA;AAAA;AAAA;AAAg+C,CAAgB,i7CAAG,EAAC,C;;;;;;;;;;;ACAp/C;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/index/index.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/index/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=57280228&scoped=true&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=57280228&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../software/HBuilderX.3.4.14.20220607/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"57280228\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/index/index.vue\"\nexport default component.exports","export * from \"-!../../../../software/HBuilderX.3.4.14.20220607/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../software/HBuilderX.3.4.14.20220607/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../software/HBuilderX.3.4.14.20220607/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../software/HBuilderX.3.4.14.20220607/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../software/HBuilderX.3.4.14.20220607/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../software/HBuilderX.3.4.14.20220607/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=57280228&scoped=true&\"","var components\ntry {\n  components = {\n    tuiNavigationBar: function () {\n      return import(\n        /* webpackChunkName: \"components/thorui/tui-navigation-bar/tui-navigation-bar\" */ \"@/components/thorui/tui-navigation-bar/tui-navigation-bar.vue\"\n      )\n    },\n    tuiIcon: function () {\n      return import(\n        /* webpackChunkName: \"components/thorui/tui-icon/tui-icon\" */ \"@/components/thorui/tui-icon/tui-icon.vue\"\n      )\n    },\n    xuiCard: function () {\n      return import(\n        /* webpackChunkName: \"components/xui-card/xui-card\" */ \"@/components/xui-card/xui-card.vue\"\n      )\n    },\n    tuiFormButton: function () {\n      return import(\n        /* webpackChunkName: \"components/thorui/tui-form-button/tui-form-button\" */ \"@/components/thorui/tui-form-button/tui-form-button.vue\"\n      )\n    },\n    tuiButton: function () {\n      return import(\n        /* webpackChunkName: \"components/thorui/tui-button/tui-button\" */ \"@/components/thorui/tui-button/tui-button.vue\"\n      )\n    },\n    tuiModal: function () {\n      return import(\n        /* webpackChunkName: \"components/thorui/tui-modal/tui-modal\" */ \"@/components/thorui/tui-modal/tui-modal.vue\"\n      )\n    },\n    tuiLottie: function () {\n      return import(\n        /* webpackChunkName: \"components/thorui/tui-lottie/tui-lottie\" */ \"@/components/thorui/tui-lottie/tui-lottie.vue\"\n      )\n    },\n    xuiSearch: function () {\n      return import(\n        /* webpackChunkName: \"components/xui-search/xui-search\" */ \"@/components/xui-search/xui-search.vue\"\n      )\n    },\n    tuiTab: function () {\n      return import(\n        /* webpackChunkName: \"components/thorui/tui-tab/tui-tab\" */ \"@/components/thorui/tui-tab/tui-tab.vue\"\n      )\n    },\n    tuiTabbar: function () {\n      return import(\n        /* webpackChunkName: \"components/thorui/tui-tabbar/tui-tabbar\" */ \"@/components/thorui/tui-tabbar/tui-tabbar.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event) {\n      _vm.showModal = false\n    }\n    _vm.e1 = function ($event) {\n      _vm.showTipModal = false\n    }\n  }\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../software/HBuilderX.3.4.14.20220607/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../software/HBuilderX.3.4.14.20220607/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../software/HBuilderX.3.4.14.20220607/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../software/HBuilderX.3.4.14.20220607/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../software/HBuilderX.3.4.14.20220607/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../software/HBuilderX.3.4.14.20220607/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../software/HBuilderX.3.4.14.20220607/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../software/HBuilderX.3.4.14.20220607/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../software/HBuilderX.3.4.14.20220607/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../software/HBuilderX.3.4.14.20220607/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"container relative\" :class=\"{'admin-bg':role==='admin'}\">\r\n\t\t<block v-if=\"role==='consumer'\">\r\n\t\t\t<tui-navigation-bar :isOpacity=\"true\" @init=\"initNavigation\" backgroundColor=\"#ffffff00\" transparent\r\n\t\t\t\tisCustom color=\"#FFF\" title=\"水表管理大师\">\r\n\t\t\t\t<!-- #ifndef MP-ALIPAY || MP-BAIDU -->\r\n\t\t\t\t<template>\r\n\t\t\t\t\t<view class=\"navigation-bar flex items-center\" :style=\"{'height':titleBarHeight+'px'}\">\r\n\t\t\t\t\t\t<view class=\"ml-4p\" @tap=\"scanCode\">\r\n\t\t\t\t\t\t\t<tui-icon name=\"sweep\" color=\"#FFF\"></tui-icon>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<text class=\"navigation-bar-title text-white\">水表管理大师</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</template>\r\n\t\t\t\t<!-- #endif -->\r\n\t\t\t</tui-navigation-bar>\r\n\t\t\t<!-- 占位背景容器 -->\r\n\t\t\t<view class=\"tui-header-bg\">\r\n\t\t\t\t<view class=\"tui-header-slide relative\" :style=\"{'top':navigationBarHeight +'px'}\">\r\n\t\t\t\t\t<swiper class=\"swiper\" circular :indicator-dots=\"true\" indicator-color=\"#FFF\"\r\n\t\t\t\t\t\tindicator-active-color=\"#07C160\" :autoplay=\"true\">\r\n\t\t\t\t\t\t<swiper-item v-for=\"(banner,index) in banners\" :key=\"index\">\r\n\t\t\t\t\t\t\t<view class=\"swiper-item\">\r\n\t\t\t\t\t\t\t\t<image :src=\"banner.url\"></image>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</swiper-item>\r\n\t\t\t\t\t</swiper>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view class=\"card-wrap\" :style=\"{'top':navigationBarHeight+123+'px','bottom':'0'}\">\r\n\t\t\t\t<xui-card :hover=\"false\" :shadow=\"true\">\r\n\t\t\t\t\t<view v-if=\"!isBinding\" class=\"flex h-full flex-col items-center justify-center\"\r\n\t\t\t\t\t\tstyle=\"min-height: 300px;\">\r\n\t\t\t\t\t\t<view class=\"nodata-img\">\r\n\t\t\t\t\t\t\t<image src=\"../../static/icons/shebei.svg\" mode=\"\"></image>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<text class=\"small-text\">没有设备</text>\r\n\t\t\t\t\t\t<tui-form-button background=\"#07C160\" radius=\"45rpx\" width=\"300rpx\" height=\"90rpx\" color=\"#000\"\r\n\t\t\t\t\t\t\t@click=\"scanCode\">\r\n\t\t\t\t\t\t\t<text class=\"text-white\">扫描设备二维码</text>\r\n\t\t\t\t\t\t</tui-form-button>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view v-else class=\"device-info flex flex-col justify-center\">\r\n\t\t\t\t\t\t<view class=\"flex items-center\">\r\n\t\t\t\t\t\t\t<image class=\"device-icon\" src=\"../../static/icons/log.svg\" mode=\"\"></image>\r\n\t\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t\t<text class=\"block title-text\">深蓝工业园4#201</text>\r\n\t\t\t\t\t\t\t\t<text class=\"block sub-title-text\">蓝牙水表号:YM00232P0169</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t<view class=\"my-15 flex items-center justify-center\">\r\n\t\t\t\t\t\t\t\t<image class=\"icon\" src=\"../../static/icons/water.svg\" mode=\"\"></image>\r\n\t\t\t\t\t\t\t\t<text class=\"sub-title\">剩余水量(m³)</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"surplus flex justify-center\">\r\n\t\t\t\t\t\t\t16.67\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"my-15 flex justify-center\">\r\n\t\t\t\t\t\t\t<tui-form-button background=\"#07c16094\" radius=\"67rpx\" width=\"235rpx\" height=\"67rpx\"\r\n\t\t\t\t\t\t\t\tcolor=\"#FFF\">\r\n\t\t\t\t\t\t\t\t抄表\r\n\t\t\t\t\t\t\t</tui-form-button>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"meter-info p-30\">\r\n\t\t\t\t\t\t\t<view class=\"meter-info-item flex items-center justify-between\">\r\n\t\t\t\t\t\t\t\t<text class=\"title-text\">总水量(m³)</text>\r\n\t\t\t\t\t\t\t\t<text>0.20</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"meter-info-item flex items-center justify-between\">\r\n\t\t\t\t\t\t\t\t<text class=\"title-text\">抄表时间</text>\r\n\t\t\t\t\t\t\t\t<text>04-26 16:27</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"meter-info-item flex items-center justify-between\">\r\n\t\t\t\t\t\t\t\t<text class=\"title-text\">水量单价(元/m³)</text>\r\n\t\t\t\t\t\t\t\t<text>3</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t<tui-button shape=\"circle\" type=\"green\" @tap=\"gotoPay\">\r\n\t\t\t\t\t\t\t水表充值\r\n\t\t\t\t\t\t</tui-button>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</xui-card>\r\n\t\t\t</view>\r\n\r\n\t\t\t<tui-modal :show=\"showModal\" custom :maskClosable=\"true\">\r\n\t\t\t\t<view class=\"flex flex-col items-center\">\r\n\t\t\t\t\t<tui-lottie width=\"450\" height=\"400\" :options=\"options\"></tui-lottie>\r\n\t\t\t\t\t<text class=\"block my-15 title-text\">您还未授权</text>\r\n\t\t\t\t\t<text class=\"block sub-title-text\">请先授权再进行操作</text>\r\n\t\t\t\t\t<view class=\"w-full my-30\">\r\n\t\t\t\t\t\t<tui-button height=\"72rpx\" :size=\"28\" shape=\"circle\" type=\"green\"\r\n\t\t\t\t\t\t\t@tap=\"empower\">立即授权</tui-button>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view @tap=\"showModal=false\">\r\n\t\t\t\t\t\t<text class=\"text-gray\">稍后再说</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</tui-modal>\r\n\r\n\t\t\t<tui-modal :show=\"showTipModal\" custom :maskClosable=\"true\">\r\n\t\t\t\t<view class=\"flex flex-col items-center\">\r\n\t\t\t\t\t<text class=\"block my-15 title-text\">提示</text>\r\n\t\t\t\t\t<image class=\"qrcode\" src=\"../../static/imgs/qrcode.jpg\" mode=\"\"></image>\r\n\t\t\t\t\t<text class=\"block my-15 title-text\">首次充值需要扫描</text>\r\n\t\t\t\t\t<text class=\"block my-15 title-text\">设备上的二维码,识别表号</text>\r\n\t\t\t\t\t<view class=\"w-full my-30\">\r\n\t\t\t\t\t\t<tui-button height=\"72rpx\" :size=\"28\" shape=\"circle\" type=\"green\"\r\n\t\t\t\t\t\t\t@tap=\"showTipModal=false\">知道了</tui-button>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</tui-modal>\r\n\r\n\t\t</block>\r\n\t\t<block v-if=\"role==='admin'\">\r\n\t\t\t<tui-navigation-bar :isOpacity=\"true\" @init=\"initNavigation\" backgroundColor=\"#ffffff00\" transparent\r\n\t\t\t\tisCustom color=\"#333\">\r\n\t\t\t\t<!-- #ifndef MP-ALIPAY || MP-BAIDU -->\r\n\t\t\t\t<template>\r\n\t\t\t\t\t<view class=\"navigation-bar flex items-center\" :style=\"{'height':titleBarHeight+'px'}\">\r\n\t\t\t\t\t\t<view class=\"logo ml-4p\">\r\n\t\t\t\t\t\t\t<tui-icon name=\"people\" color=\"#07C160\"></tui-icon>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<text class=\"title-text\">水表管理大师</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</template>\r\n\t\t\t\t<!-- #endif -->\r\n\t\t\t</tui-navigation-bar>\r\n\t\t\t<view class=\"header\">\r\n\t\t\t\t<view class=\"header-searchbar relative flex items-center justify-between\"\r\n\t\t\t\t\t:style=\"{'top':navigationBarHeight +'px'}\">\r\n\t\t\t\t\t<xui-search @search=\"search\" inputBgColor=\"#FFFFFF000\" backgroundColor=\"#FFFFFF000\"></xui-search>\r\n\t\t\t\t\t<view class=\"flex-1 flex justify-end\">\r\n\t\t\t\t\t\t<tui-icon class=\"mr-20\" name=\"down\" color=\"#333\"></tui-icon>\r\n\t\t\t\t\t\t<tui-icon name=\"sweep\" color=\"#333\" @tap=\"scanCode\"></tui-icon>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view :style=\"{'top':'267rpx'}\" class=\"relative flex h-full flex-col items-center justify-center\">\r\n\t\t\t\t<view class=\"tui-inner__box\">\r\n\t\t\t\t\t<tui-tab scroll backgroundColor=\"#FFFFFF000\" :tabs=\"tabs\" :size=\"30\" bold color=\"#999\" selectedColor=\"#07c160\"\r\n\t\t\t\t\t\tsliderBgColor=\"#07c160\"></tui-tab>\r\n\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t\t<!-- \t\t\t\t<view class=\"nodata-img\">\r\n\t\t\t\t\t<image src=\"../../static/icons/shebei.svg\" mode=\"\"></image>\r\n\t\t\t\t</view>\r\n\t\t\t\t<text class=\"small-text\">没有设备,请先登录</text>\r\n\t\t\t\t<tui-form-button background=\"#07C160\" radius=\"45rpx\" width=\"300rpx\" height=\"90rpx\" color=\"#000\"\r\n\t\t\t\t\t@click=\"scanCode\">\r\n\t\t\t\t\t<text class=\"text-white\">立即登录</text>\r\n\t\t\t\t</tui-form-button> -->\r\n\t\t\t</view>\r\n\t\t</block>\r\n\t\t<tui-tabbar zIndex=\"8999\"></tui-tabbar>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport Bluetooth from \"@/utils/bluetooth/bluetoothManager.js\"\r\n\timport {\r\n\t\tmapState,\r\n\t\tmapMutations\r\n\t} from 'vuex'\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\toptions: {\r\n\t\t\t\t\t//注意：小程序端需确保域名已授权访问\r\n\t\t\t\t\tpath: 'https://assets7.lottiefiles.com/packages/lf20_dqe40b1q.json',\r\n\t\t\t\t\tautoplay: true,\r\n\t\t\t\t\t//是否循环播放动画，可选，不传默认为true\r\n\t\t\t\t\tloop: true\r\n\t\t\t\t},\r\n\t\t\t\ttitleBarHeight: 0, //标题栏高度\r\n\t\t\t\tnavigationBarHeight: 0, //导航栏高度\r\n\t\t\t\tscreenHeight: 0, //屏幕高度\r\n\t\t\t\tisBinding: false, //是否已绑定设备\r\n\t\t\t\tisEmpower: false, //用户是否已授权\r\n\t\t\t\tshowModal: false, //控制授权对话框显示隐藏\r\n\t\t\t\tshowTipModal: false, //控制提示用户充值需扫码的显示隐藏\r\n\t\t\t\ttabbarHeight: 0,\r\n\t\t\t\tbanners: [{\r\n\t\t\t\t\t\turl: '../../static/imgs/banner.png'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\turl: '../../static/imgs/banner1.png'\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\tuserInfo: null,\r\n\t\t\t\tcontentHeight: 0,\r\n\t\t\t\trole: '', //当前角色\r\n\t\t\t\ttabs: ['水表A', '水表B', '水表C', '水表D']\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tthis.resetTabBarIndex()\r\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\tuni.hideTabBar()\r\n\t\t\tconst systemInfo = uni.getSystemInfoSync()\r\n\t\t\tthis.screenHeight = systemInfo.screenHeight\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\t//判断当前角色显示不同内容\r\n\t\t\tthis.role = uni.getStorageSync('role') || 'consumer'\r\n\t\t\tconst that = this\r\n\t\t\ttry {\r\n\t\t\t\tconst userInfo = that.$g.tui.getUserInfo()\r\n\t\t\t\tthis.userInfo = this.userInfo ? this.userInfo : userInfo\r\n\t\t\t\t//检查授权状态\r\n\t\t\t\tif (!that.isEmpower && !userInfo) {\r\n\t\t\t\t\t//未授权\r\n\t\t\t\t\tthis.showModal = true //唤起授权\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//已授权情况下检查是否绑定了蓝牙设备\r\n\t\t\t\t\t!this.checkBindMeter() && (this.showTipModal = true)\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t...mapMutations([\"changeTabBar\", \"resetTabBarIndex\"]),\r\n\t\t\t/**\r\n\t\t\t * @description 导航栏初始化信息，回传导航栏相关信息\r\n\t\t\t * @param {number} width 导航栏宽度\r\n\t\t\t * @param {number} height:导航栏高度,\r\n\t\t\t * @param {string} left:左边界坐标(px),\r\n\t\t\t * @param {string} top:上边界坐标(px),\r\n\t\t\t * @param {Number} statusBarHeight 状态栏高度,\r\n\t\t\t * @param {Number} opacity:不透明度,\r\n\t\t\t * @param {Number} windowHeight\r\n\t\t\t *\r\n\t\t\t * @return void没有返回值\r\n\t\t\t */\r\n\t\t\t//初始化自定义导航栏\r\n\t\t\tinitNavigation({\r\n\t\t\t\twidth,\r\n\t\t\t\theight,\r\n\t\t\t\tleft,\r\n\t\t\t\ttop,\r\n\t\t\t\tstatusBarHeight,\r\n\t\t\t\topacity,\r\n\t\t\t\twindowHeight\r\n\t\t\t}) {\r\n\t\t\t\tthis.titleBarHeight = height - statusBarHeight\r\n\t\t\t\tthis.navigationBarHeight = height\r\n\t\t\t},\r\n\t\t\t//扫码\r\n\t\t\tscanCode() {\r\n\t\t\t\tconst that = this\r\n\t\t\t\tuni.scanCode({\r\n\t\t\t\t\tscanType: [\r\n\t\t\t\t\t\t'qrCode'\r\n\t\t\t\t\t],\r\n\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\tconsole.log(res, \"@\");\r\n\t\t\t\t\t\t//扫到水表上的二维码,根据表号获取mac地址 连接对应的蓝牙\r\n\t\t\t\t\t\t//尝试申请使用蓝牙\r\n\t\t\t\t\t\tthat.startBleAuth()\r\n\t\t\t\t\t\t//绑定设备\r\n\t\t\t\t\t\tuni.setStorageSync('bindDevice', {\r\n\t\t\t\t\t\t\tname: 'zeer'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail() {\r\n\t\t\t\t\t\tuni.setStorageSync('bindDevice', '')\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//授权允许获取用户信息\r\n\t\t\tempower() {\r\n\t\t\t\tconst that = this\r\n\t\t\t\tuni.getSetting({\r\n\t\t\t\t\tasync success(res) {\r\n\t\t\t\t\t\t//未授权获取用户信息\r\n\t\t\t\t\t\tif (!res.authSetting['scope.userInfo']) {\r\n\t\t\t\t\t\t\t//要求授权并获取用户信息\r\n\t\t\t\t\t\t\tuni.authorize({\r\n\t\t\t\t\t\t\t\tscope: 'scope.userInfo',\r\n\t\t\t\t\t\t\t\tasync success() {\r\n\t\t\t\t\t\t\t\t\tthat.$g.tui.showLoading('登陆中')\r\n\t\t\t\t\t\t\t\t\t// 用户已经同意小程序获取用户信息，后续调用相关接口不会弹窗询问\r\n\t\t\t\t\t\t\t\t\tconst userInfo = await that.getUserInfo()\r\n\t\t\t\t\t\t\t\t\tthat.$g.tui.setUserInfo(userInfo)\r\n\t\t\t\t\t\t\t\t\tthat.userInfo = userInfo\r\n\t\t\t\t\t\t\t\t\tthat.isEmpower = true\r\n\t\t\t\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\t\t\t\tthat.showModal = false\r\n\t\t\t\t\t\t\t\t\t\t//已授权情况下检查是否绑定了蓝牙设备,未绑将显示提示\r\n\t\t\t\t\t\t\t\t\t\t!that.checkBindMeter() && (that.showTipModal = true)\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthat.$g.tui.showLoading('登陆中')\r\n\t\t\t\t\t\t\t// 用户已经同意小程序获取用户信息，后续调用相关接口不会弹窗询问\r\n\t\t\t\t\t\t\tconst userInfo = await that.getUserInfo()\r\n\t\t\t\t\t\t\tthat.$g.tui.setUserInfo(userInfo)\r\n\t\t\t\t\t\t\tthat.userInfo = userInfo\r\n\t\t\t\t\t\t\tthat.isEmpower = true\r\n\t\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\t\tthat.showModal = false\r\n\t\t\t\t\t\t\t\t//已授权情况下检查是否绑定了蓝牙设备,未绑将显示提示\r\n\t\t\t\t\t\t\t\t!that.checkBindMeter() && (that.showTipModal = true)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//向微信获取用户信息\r\n\t\t\tgetUserInfo() {\r\n\t\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\t\tuni.getUserInfo({\r\n\t\t\t\t\t\tsuccess(result) {\r\n\t\t\t\t\t\t\tresolve(result.userInfo)\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail(e) {\r\n\t\t\t\t\t\t\tconsole.log('获取用户信息失败');\r\n\t\t\t\t\t\t\treject(e)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//尝试授权使用蓝牙，如先前已同意则静默开启蓝牙并连接\r\n\t\t\tstartBleAuth() {\r\n\t\t\t\tconst that = this\r\n\t\t\t\tuni.getSetting({\r\n\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t//蓝牙未授权\r\n\t\t\t\t\t\tif (!res.authSetting['scope.bluetooth']) {\r\n\t\t\t\t\t\t\t//要求授权并开启蓝牙\r\n\t\t\t\t\t\t\tuni.authorize({\r\n\t\t\t\t\t\t\t\tscope: 'scope.bluetooth',\r\n\t\t\t\t\t\t\t\tsuccess() {\r\n\t\t\t\t\t\t\t\t\t//后续静默开启蓝牙并连接\r\n\t\t\t\t\t\t\t\t\tconst bl = new Bluetooth()\r\n\t\t\t\t\t\t\t\t\tbl.initBluetoothAdapter(that.bleFoundCallback)\r\n\t\t\t\t\t\t\t\t\t//开启蓝牙通信\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tconst bl = new Bluetooth()\r\n\t\t\t\t\t\t\tbl.initBluetoothAdapter(that.bleFoundCallback)\r\n\t\t\t\t\t\t\t//开启蓝牙通信\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//充值水费\r\n\t\t\tgotoPay() {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '../../subpackage/consumer/recharge/recharge'\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//发现蓝牙水表模块回调\r\n\t\t\tbleFoundCallback(devices) {\r\n\t\t\t\t//devices 被搜寻到的符合条件的设备组成的数组\r\n\t\t\t\tconsole.log(devices, \"搜寻到的设备\");\r\n\t\t\t},\r\n\t\t\t//检查当前是否绑定了水表\r\n\t\t\tcheckBindMeter() {\r\n\t\t\t\tthis.isBinding = uni.getStorageSync('bindDevice')\r\n\t\t\t\treturn uni.getStorageSync('bindDevice')\r\n\t\t\t},\r\n\t\t\t//管理员首页搜索框\r\n\t\t\tsearch(keyword) {\r\n\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\t...mapState([\"tabBarIndex\", \"tabBar\", \"isLogin\"]),\r\n\t\t},\r\n\t}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n\t.container {\r\n\t\tmin-height: 100vh;\r\n\t}\r\n\r\n\t.admin-bg {\r\n\t\tbackground: rgb(232, 241, 253);\r\n\t\tbackground: linear-gradient(180deg, rgba(232, 241, 253, 1) 0%, rgba(245, 246, 247, 1) 100%);\r\n\t}\r\n\r\n\t::v-deep tui-modal .tui-modal-box {\r\n\t\t// width: 80% !important;\r\n\t}\r\n\r\n\t.navigation-bar {\r\n\t\tposition: relative;\r\n\r\n\t\t.navigation-bar-title {\r\n\t\t\tposition: absolute;\r\n\t\t\tleft: 50%;\r\n\t\t\ttransform: translateX(-50%);\r\n\t\t\tfont-size: 20px;\r\n\t\t\tline-height: 1.5;\r\n\t\t\ttext-align: center;\r\n\t\t}\r\n\t}\r\n\r\n\t.tui-header-bg {\r\n\t\t// position: relative;\r\n\t\tposition: absolute;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\theight: 267rpx;\r\n\t\t// background: rgb(147, 224, 231);\r\n\t\t// background: linear-gradient(0deg, rgba(147, 224, 231, 1) 0%, rgba(31, 142, 214, 1) 100%);\r\n\t\tbackground: rgb(185, 240, 208);\r\n\t\tbackground: linear-gradient(0deg, rgba(185, 240, 208, 1) 0%, rgba(49, 185, 106, 1) 100%);\r\n\t\tborder-bottom-left-radius: 42rpx;\r\n\t\tborder-bottom-right-radius: 42rpx;\r\n\r\n\t\t.tui-header-slide {\r\n\t\t\tposition: absolute;\r\n\t\t\tz-index: 999;\r\n\t\t\tmargin: 0 4%;\r\n\r\n\t\t\tswiper {\r\n\t\t\t\twidth: 688rpx;\r\n\t\t\t\theight: 246rpx;\r\n\t\t\t\tmargin: 0 auto;\r\n\r\n\t\t\t\t.swiper-item {\r\n\t\t\t\t\tborder-radius: 48rpx;\r\n\t\t\t\t\theight: 100%;\r\n\t\t\t\t\toverflow: hidden;\r\n\r\n\t\t\t\t\t/* fallback for old browsers */\r\n\t\t\t\t\t// /* Chrome 10-25, Safari 5.1-6 */\r\n\t\t\t\t\t// /* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */\r\n\t\t\t\t\timage {\r\n\t\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\t\theight: 100%;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.card-wrap {\r\n\t\tposition: relative;\r\n\t\tmargin: 0 4%;\r\n\t\tbox-sizing: border-box;\r\n\r\n\t\t.nodata-img {\r\n\t\t\timage {\r\n\t\t\t\twidth: 200rpx;\r\n\t\t\t\theight: 200rpx;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.small-text {\r\n\t\t\tdisplay: inline-block;\r\n\t\t\tmargin: 20rpx auto;\r\n\t\t\tcolor: #B0B3B7;\r\n\t\t}\r\n\r\n\t\t.device-info {\r\n\t\t\t.device-icon {\r\n\t\t\t\twidth: 100rpx;\r\n\t\t\t\theight: 120rpx;\r\n\t\t\t\tmargin-right: 20rpx;\r\n\t\t\t}\r\n\r\n\t\t\t.icon {\r\n\t\t\t\twidth: 48rpx;\r\n\t\t\t\theight: 48rpx;\r\n\t\t\t}\r\n\r\n\t\t\t.surplus {\r\n\t\t\t\tfont-size: 48px;\r\n\t\t\t}\r\n\r\n\t\t\t.meter-info {\r\n\t\t\t\twidth: 560rpx;\r\n\t\t\t\tborder-radius: 30rpx;\r\n\t\t\t\tbackground-color: #F8F8F8;\r\n\t\t\t\tmargin-bottom: 20rpx;\r\n\r\n\t\t\t\t.meter-info-item {\r\n\t\t\t\t\tmargin: 10rpx 0;\r\n\r\n\t\t\t\t\t.title-text {\r\n\t\t\t\t\t\tcolor: var(--xui-text-color-grey);\r\n\t\t\t\t\t\tfont-size: 18px;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\txui-card {\r\n\t\t\tposition: relative;\r\n\t\t\theight: 100%;\r\n\t\t}\r\n\t}\r\n\r\n\timage.qrcode {\r\n\t\twidth: 250rpx;\r\n\t\theight: 250rpx;\r\n\t}\r\n\r\n\t//admin view style\r\n\t.logo {\r\n\t\twidth: 64rpx;\r\n\t\theight: 64rpx;\r\n\t}\r\n\r\n\t.header {\r\n\t\tposition: absolute;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\theight: 267rpx;\r\n\r\n\t\t.header-searchbar {\r\n\t\t\tmargin: 0 4%;\r\n\t\t\tpadding: 10rpx 0;\r\n\t\t}\r\n\t}\r\n\t\r\n\t\t.tui-inner__box {\r\n\t\t\twidth: 100%;\r\n\t\t\theight: 80rpx;\r\n\t\t\tbackground-color: #fff;\r\n\t\t\tborder-radius: 40rpx;\r\n\t\t\toverflow: hidden;\r\n\t\t}\r\n</style>","import mod from \"-!../../../../software/HBuilderX.3.4.14.20220607/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../software/HBuilderX.3.4.14.20220607/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../software/HBuilderX.3.4.14.20220607/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../software/HBuilderX.3.4.14.20220607/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../software/HBuilderX.3.4.14.20220607/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../software/HBuilderX.3.4.14.20220607/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../software/HBuilderX.3.4.14.20220607/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../software/HBuilderX.3.4.14.20220607/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../software/HBuilderX.3.4.14.20220607/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=57280228&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../../software/HBuilderX.3.4.14.20220607/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../software/HBuilderX.3.4.14.20220607/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../software/HBuilderX.3.4.14.20220607/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../software/HBuilderX.3.4.14.20220607/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../software/HBuilderX.3.4.14.20220607/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../software/HBuilderX.3.4.14.20220607/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../software/HBuilderX.3.4.14.20220607/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../software/HBuilderX.3.4.14.20220607/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../software/HBuilderX.3.4.14.20220607/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=57280228&scoped=true&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1683288370712\n      var cssReload = require(\"D:/software/HBuilderX.3.4.14.20220607/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}